{% extends 'base.html' %}
{% load static %}

{% block title %}Perfil{% endblock %}

{% block content %}
<style>
    .section {
        margin-bottom: 40px;
    }
    .section h2 {
        margin-bottom: 10px;
    }
    .form-group {
        margin-bottom: 10px;
    }
    input[type="text"], input[type="email"], input[type="password"] {
        width: 250px;
        padding: 10px;
        margin: 5px;
        border-radius: 10px;
        border: none;
        background-color: #1e3a5f;
        color: white;
    }
    .button {
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        background-color: #1e40af;
        color: white;
        font-weight: bold;
        margin: 10px 5px;
        cursor: pointer;
    }
    .button:hover {
        background-color: #2563eb;
    }
    .profile-pic {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 50%;
        display: block;
        margin: 0 auto 20px auto;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

</style>

<h1>MI PERFIL</h1>
<p>EDITAR LOS PARÁMETROS DE MI PERFIL</p>

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="section">
        <h2>FOTO DE PERFIL</h2>
        {% if perfil.foto %}
            <img src="{{ perfil.foto.url }}" alt="Foto perfil" class="profile-pic">
        {% else %}
            <img src="{% static 'default/avatar.png' %}" alt="Avatar por defecto" class="profile-pic">
        {% endif %}
        
        <input type="file" name="nueva_foto" accept="image/*" style="margin: 10px auto; display: block;">
        
        <div style="text-align: center;">
            <button type="submit" name="accion" value="editar_foto" class="button">CAMBIAR FOTO</button>
            <button type="submit" name="accion" value="eliminar_foto" class="button">ELIMINAR</button>
        </div>
    </div>


    <div class="section">
        <h2>INFORMACIÓN PERSONAL</h2>
        <div class="form-group">
            {{ form.first_name }}
            <input type="text" name="segundo_nombre" value="{{ perfil.segundo_nombre }}" placeholder="SEGUNDO NOMBRE">
            {{ form.last_name }}
            <input type="text" name="segundo_apellido" value="{{ perfil.segundo_apellido }}" placeholder="SEGUNDO APELLIDO">
        </div>
        <div class="form-group">
            <input type="text" name="telefono" value="{{ perfil.telefono }}" placeholder="TELÉFONO">
            {{ form.email }}
            {{ form.username }}
        </div>
    </div>

    <div class="section">
        <h2>CAMBIAR CONTRASEÑA</h2>
        <div class="form-group">
            <input type="password" name="old_password" placeholder="CONTRASEÑA ACTUAL">
            <input type="password" name="new_password" placeholder="NUEVA CONTRASEÑA">
            <input type="password" name="confirm_password" placeholder="REPETIR NUEVA CONTRASEÑA">
        </div>
    </div>

    <button type="submit" name="accion" value="guardar" class="button">GUARDAR</button>
    <a href="{% url 'inicio' %}" class="button">CANCELAR</a>
</form>
{% endblock %}